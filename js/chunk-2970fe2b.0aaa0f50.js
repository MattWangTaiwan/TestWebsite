(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2970fe2b"],{"0263":function(t,e,n){"use strict";var o=n("e6f9"),i=n.n(o);i.a},"282f":function(t,e,n){t.exports=n.p+"img/facebook.b937cc27.svg"},"28c7":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return c}));n("d3b7");var o=n("bc3a"),i=n.n(o);function r(t){return new Promise((function(e,n){i.a.post("raspapp/Get_LostPhone",t).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}function s(t){return new Promise((function(e,n){i.a.post("raspapp/Get_SnapCode",t).then((function(t){e()})).catch((function(t){n(t)}))}))}function a(t){return new Promise((function(e,n){i.a.post("raspapp/Testhistory/GetUploadFileUrl",t).then((function(t){var n=t.data;e(n.Data)})).catch((function(t){n(t)}))}))}function c(t){return new Promise((function(e,n){i.a.post("raspapp/ChangeMyPW",t).then((function(t){e(t.data)})).catch((function(t){n(t)}))}))}},"580e":function(t,e,n){t.exports=n.p+"img/img_logo_header@2x.deb62fb0.svg"},a55b:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login-panel"},[o("img",{attrs:{src:n("580e"),width:"163",height:"30"}}),t.registerFlag?o("div",{staticClass:"font-16-bold",staticStyle:{margin:"16px 0 20px 0"}},[t._v("註冊")]):o("div",{staticClass:"font-16-bold",staticStyle:{margin:"16px 0 20px 0"}},[t._v("登入")]),o("inputFormPanel",{ref:"inputForm",staticStyle:{"margin-bottom":"16px"},attrs:{inputs:t.inputList,error:t.errorTxt},on:{send:t.sendCode}}),t.registerFlag?t._e():o("div",{staticClass:"font-14-bold font-color-6",staticStyle:{"margin-bottom":"16px","align-self":"flex-end",cursor:"pointer","margin-right":"24px"},on:{click:t.forget}},[t._v(" 忘記密碼 ")]),t.registerFlag?o("div",{staticClass:"font-16-bold",class:[t.disableRegister?"disable-btn":""],staticStyle:{"margin-bottom":"16px"},attrs:{id:"register"}},[o("div",{on:{click:t.registerHandler}},[t._v("註冊")])]):o("div",{staticClass:"font-16-bold",class:[t.disableLogin?"disable-btn":""],staticStyle:{"margin-bottom":"16px"},attrs:{id:"login"}},[o("div",{on:{click:t.loginHandler}},[t._v("登入")])]),o("div",{staticClass:"font-16-normal font-color-7",staticStyle:{"margin-bottom":"16px"}},[t.registerFlag?o("span",[t._v("已是會員？")]):o("span",[t._v("還不是會員？")]),t.registerFlag?o("span",{staticStyle:{color:"#C8553D",cursor:"pointer"},on:{click:t.loginProcess}},[t._v(" 前往登入 ")]):o("span",{staticStyle:{color:"#C8553D",cursor:"pointer"},on:{click:t.registerProcess}},[t._v(" 前往註冊 ")])]),t._m(0),o("div",{staticClass:"font-16-bold",staticStyle:{"margin-bottom":"16px"},attrs:{id:"facebook"},on:{click:t.accessFacebook}},[t._m(1)]),o("GoogleLogin",{staticClass:"google-btn",attrs:{params:t.params,renderParams:t.renderParams,onSuccess:t.onSuccess}}),o("div",{staticClass:"font-16-normal font-color-8 assignment-panel"},[t._v(" 繼續進行代表您同意 "),o("span",{staticStyle:{color:"#C8553D",cursor:"pointer"},on:{click:t.link}},[t._v("國營考試通會員服務條款暨隱私權聲明")]),t._v(" 所敘內容。 ")])],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"flex",width:"100%","justify-content":"space-between","align-items":"center","margin-bottom":"16px","padding-right":"24px","padding-left":"24px"}},[n("div",{staticStyle:{height:"2px",width:"100px","background-color":"#E9E9E8"}}),n("div",{staticClass:"font-14-light font-color-8"},[t._v(" 快速登入 ")]),n("div",{staticStyle:{height:"2px",width:"100px","background-color":"#E9E9E8"}})])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("img",{attrs:{src:n("282f"),width:"9",height:"19"}}),t._v("Facebook 登入 ")])}],r=(n("b0c0"),n("d3b7"),n("d4ec")),s=n("bee2"),a=n("262e"),c=n("2caf"),u=n("9ab4"),d=n("3d20"),l=n.n(d),p=n("60a3"),f=n("4bb5"),g=n("e571"),h=n.n(g),m=n("28c7"),b=n("2206"),v=n("892b"),_=function(t){Object(a["a"])(n,t);var e=Object(c["a"])(n);function n(){var t;return Object(r["a"])(this,n),t=e.apply(this,arguments),t.types=v,t.errorTxt="",t.disableLogin=!1,t.disableRegister=!1,t.params={client_id:"147648262962-3v287vcbitvkd1lk7sv9ln24cdoqkngl.apps.googleusercontent.com"},t.renderParams={height:46,longtitle:!0},t}return Object(s["a"])(n,[{key:"link",value:function(){this.$router.push("/login/assignment")}},{key:"forget",value:function(){this.$router.push("/login/forget_password")}},{key:"registerProcess",value:function(){this.errorTxt="",this.inputForm.resetPassword(),this.changeRegisterModeAct(!0)}},{key:"loginProcess",value:function(){this.errorTxt="",this.inputForm.resetPassword(),this.changeRegisterModeAct(!1)}},{key:"created",value:function(){""===this.token&&this.refreshToken()}},{key:"sendCode",value:function(t){Object(m["c"])({Source:"CF05",Mobile:t})}},{key:"registerHandler",value:function(){var t=this;if(!this.disableRegister){var e=this.inputForm.getInput();e&&(this.disableRegister=!0,e.Status="0",this.addMember(e).then((function(n){t.disableRegister=!1,"9999"===n.Code&&(t.errorTxt=n.Message||""),"0000"===n.Code&&t.loginAndLoadBaseUser(e).then((function(e){"0000"===e.Code&&t.$router.push("/login/association")}))})))}}},{key:"loginHandler",value:function(){var t=this;if(!this.disableLogin){var e=this.inputForm.getInput();e&&(this.disableLogin=!0,this.loginAndLoadBaseUser(e).then((function(e){"8888"===e.Code?(t.disableLogin=!1,l.a.fire({toast:!0,width:300,position:"top",showConfirmButton:!1,showCloseButton:!0,background:"#FBF2F2",buttonsStyling:!1,customClass:{closeButton:"toast-close-btn",popup:"toast-popup",title:"toast-title"},title:"密碼累積錯誤5次，已鎖定帳號15分鐘"})):"9999"===e.Code?(t.disableLogin=!1,t.errorTxt="帳號密碼錯誤"):"0000"===e.Code&&t.$router.push("/main")})).catch((function(){t.disableLogin=!1,console.log("error"),t.errorTxt="帳號密碼錯誤"})))}}},{key:"accessFacebook",value:function(){var t=this,e=new Promise((function(t){window.FB.login((function(){window.FB.api("/me?fields=name,id,email",(function(e){t(e)}))}),{scope:"public_profile, email"})})),n={};e.then((function(e){return n={Source:"CF01",Name:e.name,Approve_Key:e.id,Email:e.email},t.registerFlag?t.addMember(n):t.loginAndLoadBaseUser(n)})).then((function(e){!t.registerFlag||"0000"!==e.Code&&"9999"!==e.Code?"0000"===e.Code&&t.$router.push("/main"):t.loginAndLoadBaseUser(n).then((function(n){"0000"===n.Code&&("0000"===e.Code&&t.$router.push("/login/set_mobile"),"9999"===e.Code&&t.$router.push("/main"))})).catch((function(t){return console.error(t)}))})).catch((function(t){return console.error(t)}))}},{key:"onSuccess",value:function(t){var e=this,n=t.getBasicProfile(),o=n.Ad,i=n.LT,r=n.Xt,s={Source:"CF02",Name:o,Approve_Key:i,Email:r};this.registerFlag?this.addMember(s).then((function(t){e.loginAndLoadBaseUser(s).then((function(n){"0000"===n.Code&&("0000"===t.Code&&e.$router.push("/login/set_mobile"),"9999"===t.Code&&e.$router.push("/main"))})).catch((function(t){return console.error(t)}))})).catch((function(t){return console.error(t)})):this.loginAndLoadBaseUser(s).then((function(t){"0000"===t.Code&&e.$router.push("/main")})).catch((function(t){return console.error(t)}))}},{key:"inputList",get:function(){return this.registerFlag?[this.types.INPUT_PHONE,this.types.INPUT_PASSWORD,this.types.INPUT_CAPTCHA]:[this.types.INPUT_PHONE,this.types.INPUT_PASSWORD]}}]),n}(p["f"]);Object(u["__decorate"])([Object(f["c"])("registerFlag")],_.prototype,"registerFlag",void 0),Object(u["__decorate"])([Object(f["c"])("token")],_.prototype,"token",void 0),Object(u["__decorate"])([Object(f["a"])("changeRegisterModeAct")],_.prototype,"changeRegisterModeAct",void 0),Object(u["__decorate"])([Object(f["a"])("refreshToken")],_.prototype,"refreshToken",void 0),Object(u["__decorate"])([Object(f["a"])("addMember")],_.prototype,"addMember",void 0),Object(u["__decorate"])([Object(f["a"])("loginAndLoadBaseUser")],_.prototype,"loginAndLoadBaseUser",void 0),Object(u["__decorate"])([Object(p["e"])("inputForm")],_.prototype,"inputForm",void 0),_=Object(u["__decorate"])([Object(p["a"])({components:{inputFormPanel:b["a"],GoogleLogin:h.a}})],_);var y=_,C=y,k=(n("0263"),n("2877")),F=Object(k["a"])(C,o,i,!1,null,"216a01a5",null);e["default"]=F.exports},e571:function(t,e,n){!function(t,n){n(e)}(0,(function(t){"use strict";var e,n,o=function(t){return e?Promise.resolve(e):(n||(n=function(t){return new Promise((function(n,o){window.onGapiLoad=function(){window.gapi.load("auth2",(function(){try{e=window.gapi.auth2.init(Object.assign({},t))}catch(t){o({err:"client_id missing or is incorrect, or if you added extra params maybe they are written incorrectly, did you add it to the component or plugin?"})}n(e)}))}}))}(t)),n)},i=function(t,e){return t?t[e]():Promise.reject({err:"Script not loaded correctly, did you added the plugin or the client_id to the component?"})},r={load:function(t){return Promise.all([o(t),new Promise((function(t,e){if(!document.getElementById("auth2_script_id")){var n=document.createElement("script");n.setAttribute("src","https://apis.google.com/js/platform.js?onload=onGapiLoad"),n.setAttribute("async",!0),n.setAttribute("defer","defer"),n.setAttribute("id","auth2_script_id"),document.head.appendChild(n)}t()}))]).then((function(t){return t[0]}))},signIn:function(){return i(e,"signIn")},signOut:function(){return i(e,"signOut")},isSignedIn:function(){return i(e.isSignedIn,"get")},currentUser:function(){return i(e.currentUser,"get")},grantOfflineAccess:function(){return i(e,"grantOfflineAccess")}},s=0,a=function(t,e,n,o,i,r,s,a,c,u){"boolean"!=typeof s&&(c=a,a=s,s=!1);var d,l="function"==typeof n?n.options:n;if(t&&t.render&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns,l._compiled=!0,i&&(l.functional=!0)),o&&(l._scopeId=o),r?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=d):e&&(d=s?function(){e.call(this,u(this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),d)if(l.functional){var p=l.render;l.render=function(t,e){return d.call(e),p(t,e)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,d):[d]}return n}({render:function(){var t=this.$createElement,e=this._self._c||t;return this.renderParams&&!this.logoutButton?e("div",{attrs:{id:this.id},on:{click:this.handleClick}}):e("button",{attrs:{id:this.id},on:{click:this.handleClick}},[this._t("default")],2)},staticRenderFns:[]},void 0,{name:"GoogleLogin",props:{params:{type:Object,required:!0},onCurrentUser:{type:Function,default:function(){}},onSuccess:{type:Function,default:function(){}},onFailure:{type:Function,default:function(){}},logoutButton:{type:Boolean,default:!1},renderParams:{type:Object,required:!1}},beforeCreate:function(){this.id="google-signin-btn-".concat(s++)},methods:{handleClick:function(){var t=this,e=this.logoutButton?"signOut":"signIn";r[e]().then((function(e){return t.onSuccess(e)})).catch((function(e){return t.onFailure(e)}))}},mounted:function(){var t=this;r.load(this.params).then((function(){t.renderParams&&!1===t.logoutButton&&window.gapi.signin2.render(t.id,t.renderParams),r.isSignedIn()&&t.onCurrentUser(r.currentUser())})).catch((function(t){console.log(t)}))}},void 0,!1,void 0,void 0,void 0),c={install:function(t,e){t.GoogleAuth=r.load(e)}};t.GoogleLogin=a,t.LoaderPlugin=c,t.default=a,Object.defineProperty(t,"__esModule",{value:!0})}))},e6f9:function(t,e,n){}}]);
//# sourceMappingURL=chunk-2970fe2b.0aaa0f50.js.map